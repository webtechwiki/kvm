# 运行KVM

## 一、先决条件

你将需要以下源码包：

- `qemu-kvm-release.tar.gz`
- `kvm-kmod-release.tar.bz2` (可选，如果你希望/需要自己编译内核模块则需要这个源码包)
- 一个支持 VT 的 Intel 处理器，或一个支持 SVM 的 AMD 处理器

`qemu` 所需的前置条件：

- zlib 库和头文件
- SDL 库和头文件
- alsa 库和头文件
- gnutls 库和头文件
- 内核头文件（在 Fedora 中为 kernel-devel 包）

我这里使用的是`debian 12`，可以直接通过如下命令进行安装

```shell
apt-get install gcc libsdl1.2-dev zlib1g-dev libasound2-dev linux-headers-$(uname -r) pkg-config libgnutls28-dev libpci-dev
```

## 二、安装qemu

```shell
wget https://download.qemu.org/qemu-9.0.2.tar.xz
tar xvJf qemu-9.0.2.tar.xz
cd qemu-9.0.2/
./configure --prefix=/usr/local/qemu-9.0.2
make
sudo make install
sudo ln -s /usr/local/qemu-9.0.2 /usr/local/kvm
```

加载intel虚拟内核

```shell
sudo /sbin/modprobe kvm-intel
```

该模块是 Intel 处理器上的 KVM (Kernel-based Virtual Machine) 虚拟化功能所需的。如果是AMD平台，则使用如下命令：

```shell
sudo /sbin/modprobe kvm-amd
```

以上是较新Linux内核(2.6.25+)的安装方式，系统已经包含了KVM模块。
